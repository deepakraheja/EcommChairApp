<!--
  - Product Details Screen
  - @author    ThemesBuckets <themebucketbd@gmail.com>
  - @copyright Copyright (c) 2020
  - @license   ThemesBuckets
-->

<!-- Header -->
<ion-header class="ion-no-border">
    <ion-toolbar color="color1">

        <!-- Back to previous page -->
        <ion-buttons slot="start">
            <ion-back-button color="white" default-href="" (click)="dismiss()" text="" icon="arrow-back">
            </ion-back-button>
        </ion-buttons>

        <!-- Title -->
        <ion-title></ion-title>

        <!-- Cart Page Button -->
        <ion-buttons slot="end">
            <ion-button color="white" (click)="gotoCartPage()">
                <ion-icon name="cart"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>


<!-- Main Contents of Page -->
<ion-content id="product-details" fullscreen>
    <!-- Slider of Product Images -->
    <ion-slides pager="true" [options]="slideOpts">
        <ion-slide *ngFor="let image of productkart[0]?.productSizeColor[bigProductImageIndex]?.productImg; index as i">
            <img [src]="i==0?ProductImage+productkart[0]?.productID+'/frontImage/'+productkart[0]?.frontImage:ProductImage+productkart[0]?.productID+'/productColorImage/'+productkart[0]?.productSizeColor[bigProductImageIndex]?.productSizeColorId+'/'+productkart[0]?.productSizeColor[bigProductImageIndex]?.productImg[i]"
            />

            <!-- Wish Button or Product Like/Dislike Button Option -->
            <ion-fab vertical="top" horizontal="end">
                <ion-fab-button>
                    <ion-icon color="color1" name="heart-outline" *ngIf="!isWishlist"></ion-icon>
                    <ion-icon color="color1" name="heart" *ngIf="isWishlist"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-slide>
    </ion-slides>

    <!-- Product Price -->
    <ion-row class="ion-padding">
        <ion-text color="color1" class="price">${{productkart[0].businessPrice}} &nbsp;</ion-text>
        <span class="previous-price"> ${{productkart[0].price}}</span>
    </ion-row>

    <!-- Product Name -->
    <ion-row class="ion-padding-start product-name">
        <ion-text>{{productkart[0].productName}}</ion-text>
    </ion-row>
    <icon-row class="ion-padding">
        <div class="product-right">
            <span class="rwbox" *ngIf="productkart[0]?.productTotalReview[0]?.totalRating>0">
                {{productkart[0]?.productTotalReview[0]?.averageRating}}
                ★
            </span>&nbsp;
            <span *ngIf="productkart[0]?.productTotalReview[0]?.totalRating>0">{{productkart[0]?.productTotalReview[0]?.totalRating}}
                Ratings &
                {{productkart[0]?.productTotalReview[0]?.totalReview}} Reviews
            </span>
        </div>
    </icon-row>


    <icon-row class="ion-padding">
        <table class="table table-bordered table-hover">

            <tbody>
                <tr *ngIf="productkart[0]?.qty==0" style="text-align: center;">
                    <td colspan="2">
                        <h5 class="avalibility"><span>Out
                                of
                                Stock</span></h5>
                    </td>
                </tr>
                <tr style="color: red;" *ngIf="user==null || user[0].isPersonal==false">
                    <td style="width: 50%;font-weight: 700;">
                        Minimun Order Quantity
                    </td>
                    <td style="width: 50%;font-weight: 700;">
                        {{productkart[0]?.moq}}
                    </td>
                </tr>
                <tr style="color: red;" *ngIf="user==null || user[0].isPersonal==false">
                    <td style="font-weight: 700;">
                        Delivery Cost
                    </td>
                    <td>
                        <span style="font-weight: 700;">
                            EXTRA (Buyer will pay the delivery cost)
                        </span>

                    </td>
                </tr>

                <tr *ngIf="user==null || user[0].isPersonal==true">
                </tr>
                <tr>
                    <td>
                        GST Rate
                    </td>
                    <td>
                        18%
                    </td>
                </tr>
                <tr>
                    <td>
                        Delivery Time
                    </td>
                    <td>
                        3 to 4 Working Days
                    </td>
                </tr>
                <tr *ngIf="productkart[0]?.warranty!='0'">
                    <td colspan="2">
                        <p style="text-align: center; font-weight: 700; color: red;">
                            {{productkart[0]?.warranty}} YEAR PRODUCT GUARANTEE
                        </p>
                    </td>
                </tr>

            </tbody>

        </table>
    </icon-row>
    <icon-row class="ion-padding">
        <table class="table table-bordered table-hover">
            <thead class="thead-dark">
                <tr>
                    <th class="thead-dark" colspan="2" style="text-align: center;">
                        ITEM SPECIFICATION
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="width: 50%;">
                        Seat Material
                    </td>
                    <td>
                        {{productkart[0]?.seatMaterial}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Back Material
                    </td>
                    <td>
                        {{productkart[0]?.backMaterial}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Seating Height
                    </td>
                    <td>
                        {{productkart[0]?.seatingHeight}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Back Size
                    </td>
                    <td>
                        {{productkart[0]?.backSize}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Total Height
                    </td>
                    <td>
                        {{productkart[0]?.totalHeight}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Width
                    </td>
                    <td>
                        {{productkart[0]?.width}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Depth
                    </td>
                    <td>
                        {{productkart[0]?.depth}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Overall Dimension
                    </td>
                    <td>
                        {{productkart[0]?.overallDimension}}
                    </td>
                </tr>
                <tr>
                    <td>
                        Assembly Type
                    </td>
                    <td>
                        {{productkart[0]?.assemblyType}}
                    </td>
                </tr>

            </tbody>

        </table>
    </icon-row>
    <!-- Product Description -->
    <ion-row class="ion-padding">
        <h6 class="product-title">Product Details</h6>
        <ion-text color="medium" [innerHTML]="productkart[0].shortDetails"></ion-text>
    </ion-row>
    <icon-row class="ion-padding">
        <div class="col-md-12 border-grey" *ngIf="productkart[0]?.productTotalReview[0]?.totalRating>0">
            <h3 class="product-title p-3 mt-3 text-black">Review & Rating</h3>
            <div class="row">

                <div class="text-center">
                    <div class="card-body rating-view">
                        <h1>{{productkart[0]?.productTotalReview[0]?.averageRating}} ★</h1>
                        <p>{{productkart[0]?.productTotalReview[0]?.totalRating}} Ratings <br> &
                            <br> {{productkart[0]?.productTotalReview[0]?.totalReview}} Reviews
                        </p>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="card-body">
                        <div class="row">
                            <div class="txt-color">
                                <h6>5 ★</h6>
                            </div>
                            <div class="col-md-5 pt-1">
                                <div class="progress">
                                    <div class="progress-bar bg-success" style="width:100%"></div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h6>{{productkart[0]?.productTotalReview[0]?.totalFiveRating}}</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="txt-color">
                                <h6>4 ★</h6>
                            </div>
                            <div class="col-md-5 pt-1">
                                <div class="progress">
                                    <div class="progress-bar bg-success" style="width:30%"></div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h6>{{productkart[0]?.productTotalReview[0]?.totalFourRating}}</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="txt-color">
                                <h6>3 ★</h6>
                            </div>
                            <div class="col-md-5 pt-1">
                                <div class="progress">
                                    <div class="progress-bar bg-success" style="width:10%"></div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h6>{{productkart[0]?.productTotalReview[0]?.totalThreeRating}}</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="txt-color">
                                <h6>2 ★</h6>
                            </div>
                            <div class="col-md-5 pt-1">
                                <div class="progress">
                                    <div class="progress-bar bg-warning" style="width:3%"></div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h6>{{productkart[0]?.productTotalReview[0]?.totalTwoRating}}</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="txt-color">
                                <h6>1 ★</h6>
                            </div>
                            <div class="col-md-5 pt-1">
                                <div class="progress">
                                    <div class="progress-bar bg-danger" style="width:10%"></div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h6>{{productkart[0]?.productTotalReview[0]?.totalOneRating}}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngFor="let review of  productkart[0]?.productReview; index as i">

                <div class="col-md-12">
                    <div class="row">

                        <div class="col-md-12 pl-4 pt-4 pb-3">
                            <p> <span class="review-box "> {{review.rating}} ★</span> <b>
                                    <span class="review-point">{{review.titles}}</span> </b></p>
                            <p class="text-black mb-0" [innerHTML]="review.notes"></p>

                        </div>
                        <div class="col-md-12 pt-0 pl-4 pb-3">
                            <p>{{review.name}} <i class="fa fa-check-circle"></i> Certified Buyer, {{review.city}} {{review.createdDate | date : 'dd/MM/yyyy'}}</p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </icon-row>

    <ion-slides [options]="slideOpts_Related" class="ion-padding-top">
        <ion-slide *ngFor="let item of RelatedProducts">
            <ion-grid>
                <ion-row>
                    <ion-col>
                        <ion-card class="ion-no-margin">
                            <!-- <div class="card-img" [style.background-image]="'url(' + item.images[0] + ')'"
                    (click)="goToProductDetails(item)"></div> -->
                            <div class="card-img" [style.background-image]="'url(' +  ProductImage+item.productID+'/frontImage/'+item.frontImage + ')'" (click)="goToProductDetails(item)"></div>
                            <h5 class="mb-4">
                                <span class="review-box" *ngIf="item?.totalRating>0"> {{(item?.averageRating)}}
                                    ★</span>&nbsp;
                                <span class="text-grey" *ngIf="item?.totalRating>0">({{item?.totalRating}})</span>
                            </h5>
                            <ion-fab vertical="top" horizontal="end">
                                <ion-fab-button>
                                    <ion-icon color="color1" name="heart-outline" *ngIf="!item.isWishlist"></ion-icon>
                                    <ion-icon color="color1" name="heart" *ngIf="item.isWishlist"></ion-icon>
                                </ion-fab-button>
                            </ion-fab>

                            <ion-card-content (click)="goToProductDetails(item)">
                                <!-- <ion-row>
                      <ion-text color="color1">${{item.discountPrice}} &nbsp;</ion-text>
                      <span class="previous-price"> ${{item.price}}</span>
                    </ion-row> -->
                                <ion-row class="product-name">
                                    <!-- <h4>{{item.name | slice:0:20}}</h4> -->
                                    <a href="javaScript:void(0);">
                                        <h6 *ngIf="(item?.productName).length>15" title="{{item?.productName}}">
                                            {{ (item?.productName).substr(0, 15) | titlecase }}...</h6>
                                        <h6 *ngIf="(item?.productName).length<=15" title="{{item?.productName}}">
                                            {{ item?.productName | titlecase }}</h6>
                                    </a>
                                </ion-row>
                                <ion-row>
                                    <h4 *ngIf="user==null || user[0]?.isPersonal==true || item?.businessPrice==0">
                                        {{ (item?.businessPrice) | currency:currency?.currency:'symbol' }}
                                    </h4>
                                    <h4 *ngIf="user!=null && user[0]?.isPersonal==false && item?.businessPrice>0">
                                        {{ (item?.businessPrice) | currency:currency?.currency:'symbol' }}
                                    </h4>
                                </ion-row>
                            </ion-card-content>
                        </ion-card>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-slide>
    </ion-slides>
    <!-- Selct Color -->
    <!-- <ion-row class="ion-padding-start select-heading">
        <ion-text>Select Color</ion-text>
    </ion-row> -->

    <!-- Product Colors -->
    <!-- <ion-radio-group>
        <ion-row class="ion-padding-start ion-padding-bottom">
            <ion-col size="4" *ngFor="let item of color">
                <ion-item class="border-style" lines="none" [style.border-color]="item">
                    <ion-radio color="color1" mode="ios" [value]="item"></ion-radio>
                </ion-item>
            </ion-col>
        </ion-row>
    </ion-radio-group> -->

    <!-- Select Size -->
    <!-- <ion-row class="ion-padding-start select-heading">
        <ion-text>Select Size</ion-text>
    </ion-row> -->

    <!-- Product Sizes -->
    <!-- <ion-radio-group>
        <ion-row class="ion-padding-start">
            <ion-col size="4" *ngFor="let item of size">
                <ion-item lines="none">
                    <ion-label class="size-label">{{item}}</ion-label>
                    <ion-radio color="color1" mode="ios" [value]="item"></ion-radio>
                </ion-item>
            </ion-col>
        </ion-row>
    </ion-radio-group> -->
</ion-content>


<!-- Footer -->
<ion-footer class="ion-no-border">
    <ion-toolbar class="ion-padding" transparent>
        <!-- Add To Cart Button -->
        <ion-button class="add-to-cart" color="color1" [class.disabled]="productkart[0]?.qty==0" expand="block" (click)="addToCart(1)">ADD TO CART
        </ion-button>
        <ion-button class="add-to-cart" color="success" [class.disabled]="productkart[0]?.qty==0" expand="block" (click)="addToCart(2)">BUY NOW
        </ion-button>
    </ion-toolbar>
</ion-footer>